{"code":"var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});import{createServer as createViteServer,createLogger}from\"vite\";import viteConfig from\"../vite.config\";import fs from\"fs\";import path from\"path\";import{nanoid}from\"nanoid\";const viteLogger=createLogger();async function setupVite(server,app){const serverOptions={middlewareMode:true,hmr:{server,path:\"/vite-hmr\"},allowedHosts:\"all\"};const vite=await createViteServer({...viteConfig,configFile:false,customLogger:{...viteLogger,error:__name((msg,options)=>{viteLogger.error(msg,options);process.exit(1)},\"error\")},server:serverOptions,appType:\"custom\"});app.use(vite.middlewares);app.use(\"*\",async(req,res,next)=>{const url=req.originalUrl;try{const clientTemplate=path.resolve(import.meta.dirname,\"..\",\"client\",\"index.html\");let template=await fs.promises.readFile(clientTemplate,\"utf-8\");template=template.replace(`src=\"/src/main.tsx\"`,`src=\"/src/main.tsx?v=${nanoid()}\"`);const page=await vite.transformIndexHtml(url,template);res.status(200).set({\"Content-Type\":\"text/html\"}).end(page)}catch(e){vite.ssrFixStacktrace(e);next(e)}})}__name(setupVite,\"setupVite\");export{setupVite};\n","warnings":[],"map":{"version":3,"mappings":"kHACA,OAAS,gBAAgB,iBAAkB,iBAAoB,OAE/D,OAAO,eAAgB,iBACvB,OAAO,OAAQ,KACf,OAAO,SAAU,OACjB,OAAS,WAAc,SAEvB,MAAM,WAAa,aAAa,EAEhC,eAAsB,UAAU,OAAgB,IAAc,CAC5D,MAAM,cAAgB,CACpB,eAAgB,KAChB,IAAK,CAAE,OAAQ,KAAM,WAAY,EAEjC,aAAc,KAChB,EAEA,MAAM,KAAO,MAAM,iBAAiB,CAClC,GAAG,WACH,WAAY,MACZ,aAAc,CACZ,GAAG,WACH,MAAO,QAAC,IAAK,UAAY,CACvB,WAAW,MAAM,IAAK,OAAO,EAC7B,QAAQ,KAAK,CAAC,CAChB,EAHO,QAIT,EACA,OAAQ,cACR,QAAS,QACX,CAAC,EAED,IAAI,IAAI,KAAK,WAAW,EAExB,IAAI,IAAI,IAAK,MAAO,IAAK,IAAK,OAAS,CACrC,MAAM,IAAM,IAAI,YAEhB,GAAI,CACF,MAAM,eAAiB,KAAK,QAC1B,YAAY,QACZ,KACA,SACA,YACF,EAGA,IAAI,SAAW,MAAM,GAAG,SAAS,SAAS,eAAgB,OAAO,EACjE,SAAW,SAAS,QAClB,sBACA,wBAAwB,OAAO,CAAC,GAClC,EACA,MAAM,KAAO,MAAM,KAAK,mBAAmB,IAAK,QAAQ,EACxD,IAAI,OAAO,GAAG,EAAE,IAAI,CAAE,eAAgB,WAAY,CAAC,EAAE,IAAI,IAAI,CAC/D,OAAS,EAAG,CACV,KAAK,iBAAiB,CAAU,EAChC,KAAK,CAAC,CACR,CACF,CAAC,CACH,CAhDsB","names":[],"ignoreList":[],"sources":["/Users/nickbevins/Documents/Synapta/Neurovantage/VS_10Dec2025/NeuroVantage/server/vite.ts"],"sourcesContent":[null]}}