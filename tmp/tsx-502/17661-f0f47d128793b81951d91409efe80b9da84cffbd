{"code":"var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});import{db}from\"./db\";import{clinicians,patientReports}from\"@shared/schema\";import{eq}from\"drizzle-orm\";class DatabaseStorage{constructor(dbClient){this.dbClient=dbClient}static{__name(this,\"DatabaseStorage\")}async getClinicianByEmail(email){const result=await this.dbClient.select().from(clinicians).where(eq(clinicians.email,email)).limit(1);return result[0]}async createClinician(insertClinician){const result=await this.dbClient.insert(clinicians).values(insertClinician).returning();return result[0]}async createPatientReport(insertReport){const result=await this.dbClient.insert(patientReports).values(insertReport).returning();return result[0]}async getPatientReportsByClinic(clinicId){return await this.dbClient.select().from(patientReports).where(eq(patientReports.clinicId,clinicId)).orderBy(patientReports.createdAt)}async getAllPatientReports(){return await this.dbClient.select().from(patientReports).orderBy(patientReports.createdAt)}async getPatientReportById(id){const result=await this.dbClient.select().from(patientReports).where(eq(patientReports.id,id)).limit(1);return result[0]}}class MemoryStorage{static{__name(this,\"MemoryStorage\")}cliniciansStore=[];patientReportsStore=[];clinicianCounter=1;reportCounter=1;async getClinicianByEmail(email){return this.cliniciansStore.find(c=>c.email===email)}async createClinician(insertClinician){const clinician={id:this.clinicianCounter++,email:insertClinician.email,password:insertClinician.password,name:insertClinician.name??null,createdAt:new Date};this.cliniciansStore.push(clinician);return clinician}async createPatientReport(insertReport){const report={id:this.reportCounter++,clinicId:insertReport.clinicId??\"bevins\",demographics:insertReport.demographics,medicalHistory:insertReport.medicalHistory,screenerScores:insertReport.screenerScores,cognitiveScores:insertReport.cognitiveScores,recommendations:insertReport.recommendations,status:insertReport.status??\"Review\",createdAt:new Date};this.patientReportsStore.push(report);return report}async getPatientReportsByClinic(clinicId){return this.patientReportsStore.filter(report=>report.clinicId===clinicId).sort((a,b)=>(a.createdAt?.getTime()??0)-(b.createdAt?.getTime()??0))}async getAllPatientReports(){return[...this.patientReportsStore].sort((a,b)=>(a.createdAt?.getTime()??0)-(b.createdAt?.getTime()??0))}async getPatientReportById(id){return this.patientReportsStore.find(report=>report.id===id)}}let selectedStorage;if(db){selectedStorage=new DatabaseStorage(db)}else{selectedStorage=new MemoryStorage}const storage=selectedStorage;export{DatabaseStorage,storage};\n","warnings":[],"map":{"version":3,"mappings":"kHACA,OAAS,OAAU,OACnB,OACE,WACA,mBAKK,iBACP,OAAS,OAAU,cAYZ,MAAM,eAAoC,CAC/C,YAA6B,SAA0B,CAA1B,sBAA2B,CAvB1D,MAsBiD,gCAG/C,MAAM,oBAAoB,MAA+C,CACvE,MAAM,OAAS,MAAM,KAAK,SACvB,OAAO,EACP,KAAK,UAAU,EACf,MAAM,GAAG,WAAW,MAAO,KAAK,CAAC,EACjC,MAAM,CAAC,EACV,OAAO,OAAO,CAAC,CACjB,CAEA,MAAM,gBAAgB,gBAAsD,CAC1E,MAAM,OAAS,MAAM,KAAK,SAAS,OAAO,UAAU,EAAE,OAAO,eAAe,EAAE,UAAU,EACxF,OAAO,OAAO,CAAC,CACjB,CAEA,MAAM,oBAAoB,aAA2D,CACnF,MAAM,OAAS,MAAM,KAAK,SAAS,OAAO,cAAc,EAAE,OAAO,YAAY,EAAE,UAAU,EACzF,OAAO,OAAO,CAAC,CACjB,CAEA,MAAM,0BAA0B,SAA4C,CAC1E,OAAO,MAAM,KAAK,SACf,OAAO,EACP,KAAK,cAAc,EACnB,MAAM,GAAG,eAAe,SAAU,QAAQ,CAAC,EAC3C,QAAQ,eAAe,SAAS,CACrC,CAEA,MAAM,sBAAiD,CACrD,OAAO,MAAM,KAAK,SAAS,OAAO,EAAE,KAAK,cAAc,EAAE,QAAQ,eAAe,SAAS,CAC3F,CAEA,MAAM,qBAAqB,GAAgD,CACzE,MAAM,OAAS,MAAM,KAAK,SACvB,OAAO,EACP,KAAK,cAAc,EACnB,MAAM,GAAG,eAAe,GAAI,EAAE,CAAC,EAC/B,MAAM,CAAC,EACV,OAAO,OAAO,CAAC,CACjB,CACF,CAEA,MAAM,aAAkC,CAlExC,MAkEwC,8BAC9B,gBAA+B,CAAC,EAChC,oBAAuC,CAAC,EACxC,iBAAmB,EACnB,cAAgB,EAExB,MAAM,oBAAoB,MAA+C,CACvE,OAAO,KAAK,gBAAgB,KAAM,GAAM,EAAE,QAAU,KAAK,CAC3D,CAEA,MAAM,gBAAgB,gBAAsD,CAC1E,MAAM,UAAuB,CAC3B,GAAI,KAAK,mBACT,MAAO,gBAAgB,MACvB,SAAU,gBAAgB,SAC1B,KAAM,gBAAgB,MAAQ,KAC9B,UAAW,IAAI,IACjB,EACA,KAAK,gBAAgB,KAAK,SAAS,EACnC,OAAO,SACT,CAEA,MAAM,oBAAoB,aAA2D,CACnF,MAAM,OAAwB,CAC5B,GAAI,KAAK,gBACT,SAAU,aAAa,UAAY,SACnC,aAAc,aAAa,aAC3B,eAAgB,aAAa,eAC7B,eAAgB,aAAa,eAC7B,gBAAiB,aAAa,gBAC9B,gBAAiB,aAAa,gBAC9B,OAAQ,aAAa,QAAU,SAC/B,UAAW,IAAI,IACjB,EACA,KAAK,oBAAoB,KAAK,MAAM,EACpC,OAAO,MACT,CAEA,MAAM,0BAA0B,SAA4C,CAC1E,OAAO,KAAK,oBACT,OAAQ,QAAW,OAAO,WAAa,QAAQ,EAC/C,KAAK,CAAC,EAAG,KAAO,EAAE,WAAW,QAAQ,GAAK,IAAM,EAAE,WAAW,QAAQ,GAAK,EAAE,CACjF,CAEA,MAAM,sBAAiD,CACrD,MAAO,CAAC,GAAG,KAAK,mBAAmB,EAAE,KACnC,CAAC,EAAG,KAAO,EAAE,WAAW,QAAQ,GAAK,IAAM,EAAE,WAAW,QAAQ,GAAK,EACvE,CACF,CAEA,MAAM,qBAAqB,GAAgD,CACzE,OAAO,KAAK,oBAAoB,KAAM,QAAW,OAAO,KAAO,EAAE,CACnE,CACF,CAEA,IAAI,gBAEJ,GAAI,GAAI,CACN,gBAAkB,IAAI,gBAAgB,EAAE,CAC1C,KAAO,CACL,gBAAkB,IAAI,aACxB,CAEO,MAAM,QAAU","names":[],"ignoreList":[],"sources":["/Users/nickbevins/Documents/Synapta/Neurovantage/VS_10Dec2025/NeuroVantage/server/storage.ts"],"sourcesContent":[null]}}