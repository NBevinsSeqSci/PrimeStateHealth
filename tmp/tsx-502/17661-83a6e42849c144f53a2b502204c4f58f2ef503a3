{"code":"var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});import{storage}from\"./storage\";import{insertPatientReportSchema,insertClinicianSchema}from\"@shared/schema\";import bcrypt from\"bcrypt\";async function registerRoutes(httpServer,app){app.post(\"/api/clinician/login\",async(req,res)=>{try{const{email,password}=req.body;if(!email||!password){return res.status(400).json({error:\"Email and password required\"})}const clinician=await storage.getClinicianByEmail(email);if(!clinician){return res.status(401).json({error:\"Invalid credentials\"})}const isValid=await bcrypt.compare(password,clinician.password);if(!isValid){return res.status(401).json({error:\"Invalid credentials\"})}return res.json({success:true,clinician:{id:clinician.id,email:clinician.email,name:clinician.name}})}catch(error){console.error(\"Login error:\",error);return res.status(500).json({error:\"Login failed\"})}});app.post(\"/api/clinician/register\",async(req,res)=>{try{const validatedData=insertClinicianSchema.parse(req.body);const existing=await storage.getClinicianByEmail(validatedData.email);if(existing){return res.status(400).json({error:\"Email already exists\"})}const hashedPassword=await bcrypt.hash(validatedData.password,10);const clinician=await storage.createClinician({...validatedData,password:hashedPassword});return res.json({success:true,clinician:{id:clinician.id,email:clinician.email}})}catch(error){console.error(\"Registration error:\",error);return res.status(500).json({error:\"Registration failed\"})}});app.post(\"/api/patient/assessment\",async(req,res)=>{try{const validatedData=insertPatientReportSchema.parse(req.body);const report=await storage.createPatientReport(validatedData);return res.json({success:true,reportId:report.id})}catch(error){console.error(\"Assessment submission error:\",error);return res.status(500).json({error:\"Failed to save assessment\"})}});app.get(\"/api/clinic/:clinicId/reports\",async(req,res)=>{try{const{clinicId}=req.params;const reports=await storage.getPatientReportsByClinic(clinicId);return res.json({reports})}catch(error){console.error(\"Fetch reports error:\",error);return res.status(500).json({error:\"Failed to fetch reports\"})}});app.get(\"/api/patient/report/:id\",async(req,res)=>{try{const id=parseInt(req.params.id);const report=await storage.getPatientReportById(id);if(!report){return res.status(404).json({error:\"Report not found\"})}return res.json({report})}catch(error){console.error(\"Fetch report error:\",error);return res.status(500).json({error:\"Failed to fetch report\"})}});return httpServer}__name(registerRoutes,\"registerRoutes\");export{registerRoutes};\n","warnings":[],"map":{"version":3,"mappings":"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","names":[],"ignoreList":[],"sources":["/Users/nickbevins/Documents/Synapta/Neurovantage/VS_10Dec2025/NeuroVantage/server/routes.ts"],"sourcesContent":[null]}}